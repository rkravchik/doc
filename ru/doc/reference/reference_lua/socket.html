






















<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google-site-verification" content="CR40jzpLISkiUAw2MrH2zHSDNVmzyK88Nj7Crmx_RxQ" />
    
  <link rel="icon" type="image/png" sizes="16x16" href=../../../_static/favicon/favicon-16x16.png>
  <link rel="icon" type="image/png" sizes="32x32" href=../../../_static/favicon/favicon-32x32.png>
  <link rel="icon" type="image/png" sizes="96x96" href=../../../_static/favicon/favicon-96x96.png>

    <title>1.18. Модуль socket</title>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>
      <script type="text/javascript" src="../../../_static/searchtools.js"></script>
      <script type="text/javascript" src="../../../_static/js/menu.js"></script>
      <script type="text/javascript" src="../../../_static/js/mobile_menu.js"></script>
      <script type="text/javascript" src="../../../_static/js/stacktable.min.js"></script>
      <script type="text/javascript" src="../../../_static/js/headers.js"></script>
      <script type="text/javascript" src="../../../_static/js/dropdown.js"></script>
      <script type="text/javascript" src="../../../_static/js/jquery.sticky-kit.min.js"></script>
      <link rel="stylesheet" href="../../../_static/design.css">

    
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:       '',
        VERSION:        '1.7.3',
        COLLAPSE_INDEX:  false,
        FILE_SUFFIX:    '.html',
        HAS_SOURCE:      true
      };
      
      
      var disqus_config = function () {
          this.page.identifier = "doc/reference/reference_lua/socket";
          this.language        = "ru"
      };
      window.twttr = (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = []; t.ready = function(f) { t._e.push(f); };
        return t;
      }(document, "script", "twitter-wjs"));
    </script>
    

  </head>
  <body class="p-cols_design b-doc-doc_reference_reference_lua_socket">
    <div class="b-wrapper">
      <!-- HEADER > -->
      
  <header class="b-header">
    <div class="b-header_menu_mobile">
      <div class="b-burger-button">
        <span></span>
      </div>
      <form role="search" class="b-header-search"
            action="../../../search.html" method="get">
        <input name="q" type="search">
      </form>
    </div>
    <div class="b-menu_mobile">
      <div class="b-menu_mobile__wrapper">
        <nav class="b-header_menu">
          
  <ul class="b-menu">
    
      
      <li class="b-menu-item">
      
        <a href="../../../index.html" class="b-menu-item-url">Overview</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../try.html" class="b-menu-item-url">Try</a>
      </li>
    
      
      <li class="b-menu-item p-active">
      
        <a href="../../../doc.html" class="b-menu-item-url">Documentation</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../download.html" class="b-menu-item-url">Download</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../rocks.html" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

          
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../../../en/doc/reference/reference_lua/socket.html
  
"
           class="b-doc-language_selector-item-url"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="#" class="b-doc-language_selector-item-url p-active"> Ru </a>
      
      </li>
    
    </ul>

        </nav>
      </div>
    </div>
    <div class="b-header-wrapper">
      <nav class="b-header_menu">
        <div class="b-header_menu-top">
          
  <ul class="b-menu">
    
      
      <li class="b-menu-item">
      
        <a href="../../../index.html" class="b-menu-item-url">Overview</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../try.html" class="b-menu-item-url">Try</a>
      </li>
    
      
      <li class="b-menu-item p-active">
      
        <a href="../../../doc.html" class="b-menu-item-url">Documentation</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../download.html" class="b-menu-item-url">Download</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../rocks.html" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

          <div class="b-header_menu-top-ctl">
            
    <ul class="b-doc-language_selector-list">
    
      <li class="b-doc-language_selector-item">
      
        <a href="
  
    ../../../../en/doc/reference/reference_lua/socket.html
  
"
           class="b-doc-language_selector-item-url"> En </a>
      
      </li>
    
      <li class="b-doc-language_selector-item">
      
        <a href="#" class="b-doc-language_selector-item-url p-active"> Ru </a>
      
      </li>
    
    </ul>

            <button class="b-search-btn"> <i class="fa fa-search fa-2x"></i> </button>
          </div>
        </div>
        <div class="b-header_menu-bottom">
          <form role="search" class="b-header_menu-search" action="../../../search.html" method="get">
            <input name="q" type="search" class="b-header_menu-search-text" placeholder="Search">
            <input class="b-header_menu-search-but" type="submit" value="Search">
          </form>
        </div>
      </nav>
    </div>
  </header>

      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  
    <section class="b-block-lightgray b-documentation_top b-clearbox p-documentation_in">
      <div class="b-block-wrapper">
        <h2 class="b-section-title b-ellipsis toggle-navigation" title="1.18. Модуль <cite>socket</cite>"> 1.18. Модуль <cite>socket</cite> </h2>
      </div>
    </section>
    
      <div class="b-cols_content b-clearbox">
        <div class="b-cols_content_left">
          <div class="b-menu-toc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../whats_new.html">Что нового?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../whats_new.html#what-s-new-in-tarantool-1-7">Что нового в Tarantool 1.7?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Общие сведения</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#an-application-server-together-with-a-database-manager">Сервер приложений + СУБД</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#database-features">Возможности СУБД</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../book/index.html">Руководство пользователя</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../book/intro.html">1. Предисловие</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/intro.html#how-to-read-the-documentation">1.1. Как пользоваться документацией</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/intro.html#getting-in-touch-with-the-tarantool-community">1.2. Как связаться с сообществом разработчиков Tarantool&#8217;а</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/user_guide_getting_started.html">2. Начало работы</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/user_guide_getting_started.html#downloading-and-installing-a-binary-package">2.1. Скачивание и установка бинарного пакета</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/user_guide_getting_started.html#starting-tarantool-and-making-your-first-database">2.2. Первичный запуск Tarantool&#8217;а и создание базы данных</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/user_guide_getting_started.html#connecting-remotely">2.3. Установка удаленного соединения</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/box/index.html">3. Функционал СУБД</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/box/data_model.html">3.1. Модель данных</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#space">3.1.1. Пространство</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#tuple">3.1.2. Tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#index">3.1.3. Индекс</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#data-types">3.1.4. Типы данных</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/data_model.html#lua-vs-msgpack">3.1.4.1. Lua vs MsgPack</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/data_model.html#indexed-field-types">3.1.4.2. Indexed field types</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#persistence">3.1.5. Persistence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/data_model.html#operations">3.1.6. Операции</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/data_model.html#data-operations">3.1.6.1. Data operations</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/data_model.html#index-operations">3.1.6.2. Операции с индексами</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/data_model.html#complexity-factors">3.1.6.3. Complexity factors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/box/atomic.html">3.2. Контроль транзакций</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/atomic.html#threads-fibers-and-yields">3.2.1. Threads, fibers and yields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/atomic.html#cooperative-multitasking">3.2.2. Cooperative multitasking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/atomic.html#transactions">3.2.3. Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/atomic.html#implicit-yields">3.2.4. Implicit yields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/box/authentication.html">3.3. Ограничение доступа</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/authentication.html#users">3.3.1. Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/authentication.html#passwords">3.3.2. Passwords</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/authentication.html#owners-and-privileges">3.3.3. Owners and privileges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/authentication.html#roles">3.3.4. Roles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/authentication.html#sessions-and-security">3.3.5. Sessions and security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/box/triggers.html">3.4. Триггеры</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/box/limitations.html">3.5. Ограничения</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/app_server.html">4. Сервер приложений</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#about-modules-rocks">4.1. Про модули/rocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#installing-an-existing-module">4.2. Установка существующего модуля</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#creating-a-new-lua-module-locally">4.3. Создание нового модуля на языке Lua</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#creating-a-new-c-c-module-locally">4.4. Создание нового модуля на языке C/C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#creating-a-mixed-lua-c-module-locally">4.5. Создание нового модуля на смеси языков Lua/C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#tips-for-special-situations">4.6. Примечания для особых случаев</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#tips-on-lua-syntax">4.7. Tips on Lua syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/app_server.html#cookbook-recipes">4.8. Книга рецептов</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#hello-world-lua">4.8.1. hello_world.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#console-start-lua">4.8.2. console_start.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#fio-read-lua">4.8.3. fio_read.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#fio-write-lua">4.8.4. fio_write.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#ffi-printf-lua">4.8.5. ffi_printf.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#ffi-gettimeofday-lua">4.8.6. ffi_gettimeofday.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#ffi-zlib-lua">4.8.7. ffi_zlib.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#ffi-meta-lua">4.8.8. ffi_meta.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#print-arrays-lua">4.8.9. print_arrays.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#count-array-lua">4.8.10. count_array.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#count-array-with-nils-lua">4.8.11. count_array_with_nils.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#count-array-with-nulls-lua">4.8.12. count_array_with_nulls.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#count-map-lua">4.8.13. count_map.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#swap-lua">4.8.14. swap.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#uri-lua">4.8.15. uri.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#class-lua">4.8.16. class.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#garbage-lua">4.8.17. garbage.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#fiber-producer-and-consumer-lua">4.8.18. fiber_producer_and_consumer.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#socket-tcpconnect-lua">4.8.19. socket_tcpconnect.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#socket-tcp-echo-lua">4.8.20. socket_tcp_echo.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#getaddrinfo-lua">4.8.21. getaddrinfo.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#socket-udp-echo-lua">4.8.22. socket_udp_echo.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#http-get-lua">4.8.23. http_get.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#http-send-lua">4.8.24. http_send.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#http-server-lua">4.8.25. http_server.lua</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/app_server.html#http-generate-html-lua">4.8.26. http_generate_html.lua</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/administration.html">5. Администрирование серверной части</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#using-tarantool-as-a-client">5.1. Using Tarantool as a client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#conventions-used-in-this-section">5.1.1. Условные обозначения, используемые в этом разделе</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#options-when-starting-client-from-the-command-line">5.1.2. Параметры запуска клиента из командной строки</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#tokens-requests-and-special-key-combinations">5.1.3. Токены, запросы и специальные комбинации клавиш</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#requests">5.1.4. Запросы</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#utility-tarantoolctl">5.2. Утилита tarantoolctl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#configuration-for-tarantoolctl">5.2.1. Конфигурирование tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#commands-for-tarantoolctl">5.2.2. Команды для tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#typical-code-snippets-for-tarantoolctl">5.2.3. Примеры кода для tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#a-detailed-example-for-tarantoolctl">5.2.4. Подробный пример для tarantoolctl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#an-example-for-tarantoolctl-connect">5.2.5. An example for tarantoolctl connect</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#administrative-ports">5.3. Служебные порты</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#administrative-requests">5.4. Служебные запросы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#server-introspection">5.5. Просмотр состояния сервера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#backups">5.6. Резервное копирование</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#cold-backup">5.6.1. Cold backup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#continuous-remote-backup">5.6.2. Continuous remote backup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#hot-backup">5.6.3. Hot backup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#updates-upgrades">5.7. Обновление сервера и базы данных</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#updating-tarantool-in-production">5.7.1. Обновление Tarantool&#8217;а в условиях эксплуатации</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#upgrading-a-tarantool-database">5.7.2. Upgrading a Tarantool database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#server-signal-handling">5.8. Обработка сигналов от сервера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#generating-a-core-file">5.9. Generating a core file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#process-title">5.10. Название процесса</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#system-specific-administration-notes">5.11. Заметки по администрированию для разных платформ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#debian-gnu-linux-and-ubuntu">5.11.1. Debian GNU/Linux and Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#fedora-rhel-centos">5.11.2. Fedora, RHEL, CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#freebsd">5.11.3. FreeBSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#mac-os-x">5.11.4. Mac OS X</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/administration.html#notes-for-systemd-users">5.12. Заметки для пользователей systemd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#instance-management">5.12.1. Управление экземплярами</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#creating-instances">5.12.1.1. Создание экземпляров</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#starting-instances">5.12.1.2. Запуск экземпляров</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#monitoring-instances">5.12.1.3. Мониторинг экземпляров</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#attaching-to-instances">5.12.1.4. Подсоединение к экземплярам</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#checking-logs">5.12.1.5. Проверка журнала</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/administration.html#stopping-instances">5.12.1.6. Остановка экземпляров</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#daemon-supervision">5.12.2. Контроль за фоновыми программами</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#customizing-the-service-file">5.12.3. Правка настроек сервисного файла</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#debugging">5.12.4. Отладка</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#precautions">5.12.5. Особые указания</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#limitations">5.12.6. Ограничения</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/administration.html#sysvinit-systemd-conversion">5.12.7. sysvinit -&gt; systemd conversion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/replication/index.html">6. Репликация</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#replication-architecture">6.1. Архитектура механизма репликации</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#setting-up-a-master">6.2. Setting up a master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#setting-up-a-replica">6.3. Настройка сервера-реплики</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#recovering-from-a-degraded-state">6.4. Восстановление после сбоя</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#quick-startup-of-a-new-simple-two-server-cluster">6.5. Quick startup of a new simple two-server cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#monitoring-a-replica-s-actions">6.6. Мониторинг действий реплики</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#preventing-duplicate-actions">6.7. Предотвращение дублирующихся действий</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#master-master-replication">6.8. Репликация по схеме master-master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#all-the-what-if-questions">6.9. Ответы на вопросы &#8220;Что если?&#8221;</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/replication/index.html#hands-on-replication-tutorial">6.10. Практическое руководство по репликации</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/connectors/index.html">7. Коннекторы</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#protocol">7.1. Протокол</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#packet-example">7.2. Пример пакета данных</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#setting-up-the-server-for-connector-examples">7.3. Настройка окружения для примеров работы с коннекторами</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#java">7.4. Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#go">7.5. Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#r">7.6. R</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#erlang">7.7. Erlang</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#perl">7.8. Perl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#php">7.9. PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#python">7.10. Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#node-js">7.11. Node.js</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#c">7.12. C#</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#id1">7.13. C</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/connectors/index.html#example-1">7.13.1. Пример 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/connectors/index.html#example-2">7.13.2. Пример 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../book/connectors/index.html#interpreting-function-return-values">7.14. Интерпретация возвращаемых значений</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../book/faq.html">8. Вопросы и ответы</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Справочники</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">1. Справочник по встроенной библиотеке</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="box.html">1.1. Модуль <cite>box</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_cfg.html">1.1.1. Submodule <cite>box.cfg</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_index.html">1.1.2. Вложенный модуль <cite>box.index</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_index.html#example-showing-use-of-the-box-functions">1.1.2.1. Example showing use of the box functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_index.html#example-showing-a-user-defined-iterator">1.1.2.2. Example showing a user-defined iterator</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_index.html#submodule-box-index-with-index-type-rtree-for-spatial-searches">1.1.2.3. Submodule <cite>box.index</cite> with index type = RTREE for spatial searches</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_info.html">1.1.3. Submodule <cite>box.info</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="box_once.html">1.1.4. Функция <cite>box.once</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_schema.html">1.1.5. Вложенный модуль <cite>box.schema</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_session.html">1.1.6. Вложенный модуль <cite>box.session</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_slab.html">1.1.7. Submodule <cite>box.slab</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_space.html">1.1.8. Вложенный модуль <cite>box.space</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_space.html#example-use-box-space-functions-to-read-space-tuples">1.1.8.1. Example: use box.space functions to read _space tuples</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_space.html#example-use-box-space-functions-to-organize-a-space-tuple">1.1.8.2. Example: use box.space functions to organize a _space tuple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_stat.html">1.1.9. Submodule <cite>box.stat</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_tuple.html">1.1.10. Вложенный модуль <cite>box.tuple</cite></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../book/box/box_tuple.html#example">1.1.10.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../book/box/box_txn_management.html">1.1.11. Functions for transaction management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="clock.html">1.2. Модуль <cite>clock</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="console.html">1.3. Модуль <cite>console</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="crypto.html">1.4. Модуль <cite>crypto</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="crypto.html#incremental-methods-in-the-crypto-module">1.4.1. Incremental methods in the crypto module</a></li>
<li class="toctree-l4"><a class="reference internal" href="crypto.html#getting-the-same-results-from-digest-and-crypto-modules">1.4.2. Getting the same results from digest and crypto modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="csv.html">1.5. Module <cite>csv</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="digest.html">1.6. Модуль <cite>digest</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="digest.html#incremental-methods-in-the-digest-module">1.6.1. Incremental methods in the digest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="digest.html#example">1.6.2. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="errno.html">1.7. Module <cite>errno</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="box_error.html">1.8. Вложенный модуль <cite>box.error</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="fiber.html">1.9. Модуль <cite>fiber</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="fiber.html#example-of-fiber-use">1.9.1. Example Of Fiber Use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fiber_ipc.html">1.10. Модуль <cite>fiber-ipc</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="fiber_ipc.html#channel">1.10.1. Channel</a><ul>
<li class="toctree-l5"><a class="reference internal" href="fiber_ipc.html#example">1.10.1.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="fiber_ipc.html#condition-variables">1.10.2. Condition variables</a><ul>
<li class="toctree-l5"><a class="reference internal" href="fiber_ipc.html#id1">1.10.2.1. Пример</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fio.html">1.11. Module <cite>fio</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="fio.html#common-pathname-manipulations">1.11.1. Common pathname manipulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="fio.html#common-file-manipulations">1.11.2. Common file manipulations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fun.html">1.12. Module <cite>fun</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="json.html">1.13. Module <cite>json</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="json.html#configuration-settings">1.13.1. Configuration settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="log.html">1.14. Module <cite>log</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="log.html#example">1.14.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="msgpack.html">1.15. Модуль <cite>msgpack</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="msgpack.html#example">1.15.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="net_box.html">1.16. Модуль <cite>net.box</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="net_box.html#example">1.16.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pickle.html">1.17. Модуль <cite>pickle</cite></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.18. Модуль <cite>socket</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples">1.18.1. Примеры:</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#use-of-a-tcp-socket-over-the-internet">1.18.1.1. Use of a TCP socket over the Internet</a></li>
<li class="toctree-l5"><a class="reference internal" href="#use-of-a-udp-socket-on-localhost">1.18.1.2. Use of a UDP socket on localhost</a></li>
<li class="toctree-l5"><a class="reference internal" href="#use-tcp-server-to-accept-file-contents-sent-with-socat">1.18.1.3. Use tcp_server to accept file contents sent with socat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="strict.html">1.19. Модуль <cite>strict</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="tap.html">1.20. Module <cite>tap</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tap.html#example">1.20.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tarantool.html">1.21. Модуль <cite>tarantool</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="uuid.html">1.22. Module <cite>uuid</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="uuid.html#example">1.22.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="xlog.html">1.23. Module <cite>xlog</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="yaml.html">1.24. Module <cite>yaml</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="yaml.html#example">1.24.1. Пример</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="other.html">1.25. Разное</a></li>
<li class="toctree-l3"><a class="reference internal" href="errcodes.html">1.26. Коды ошибок от базы данных</a></li>
<li class="toctree-l3"><a class="reference internal" href="errcodes.html#handling-errors">1.27. Handling errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_rock/index.html">2. Справочник по сторонним библиотекам</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/dbms.html">2.1. SQL DBMS Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#mysql-example">2.1.1. MySQL Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#installation">2.1.1.1. Installation</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../reference_rock/dbms.html#with-luarocks">2.1.1.1.1. With LuaRocks</a></li>
<li class="toctree-l6"><a class="reference internal" href="../reference_rock/dbms.html#with-github">2.1.1.1.2. With GitHub</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#connecting">2.1.1.2. Connecting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#how-to-ping">2.1.1.3. How to ping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#executing-a-statement">2.1.1.4. Executing a statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#closing-connection">2.1.1.5. Closing connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#example">2.1.1.6. Пример</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/dbms.html#postgresql-example">2.1.2. PostgreSQL Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id1">2.1.2.1. Installation</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../reference_rock/dbms.html#id2">2.1.2.1.1. With LuaRocks</a></li>
<li class="toctree-l6"><a class="reference internal" href="../reference_rock/dbms.html#id3">2.1.2.1.2. With GitHub</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id4">2.1.2.2. Connecting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id5">2.1.2.3. How to ping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id6">2.1.2.4. Executing a statement</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id7">2.1.2.5. Closing connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="../reference_rock/dbms.html#id8">2.1.2.6. Пример</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/expirationd.html">2.2. Модуль <cite>expirationd</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/shard.html">2.3. Модуль <cite>shard</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/shard.html#example-shard-init-syntax-for-one-shard">2.3.1. Example: shard.init syntax for one shard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/shard.html#example-shard-init-syntax-for-three-shards">2.3.2. Example: shard.init syntax for three shards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/shard.html#example-shard-minimal-configuration">2.3.3. Example: Shard, Minimal Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/shard.html#example-shard-scaling-out">2.3.4. Example: Shard, Scaling Out</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference_rock/tdb.html">2.4. Module <cite>tdb</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/tdb.html#debugger-commands">2.4.1. Debugger Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference_rock/tdb.html#example-session">2.4.2. Example Session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">3. Справочник по настройке</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html#command-options">3.1. Опции комнандной строки</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html#uri">3.2. Универсальный код ресурса (URI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html#initialization-file">3.3. Файл инициализации</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html#configuration-parameters">3.4. Параметры конфигурации</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#basic-parameters">3.4.1. Basic parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#configuring-the-storage">3.4.2. Configuring the storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#snapshot-daemon">3.4.3. Snapshot daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#binary-logging-and-snapshots">3.4.4. Binary logging and snapshots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#hot-standby">3.4.5. Hot standby</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#replication">3.4.6. Репликация</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#networking">3.4.7. Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration/index.html#logging">3.4.8. Logging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Практикум</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/lua_tutorials.html">1. Практические задания на Lua</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#insert-one-million-tuples-with-a-lua-stored-procedure">1.1. Вставка 1 млн кортежей с помощью хранимой процедуры на языке Lua</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#configure">1.1.1. Configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#delimiter">1.1.2. Delimiter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#create-a-function-that-returns-a-string">1.1.3. Create a function that returns a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#create-a-function-that-calls-another-function-and-sets-a-variable">1.1.4. Create a function that calls another function and sets a variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-the-function-so-it-returns-a-one-letter-random-string">1.1.5. Modify the function so it returns a one-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-the-function-so-it-returns-a-ten-letter-random-string">1.1.6. Modify the function so it returns a ten-letter random string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#make-a-tuple-out-of-a-number-and-a-string">1.1.7. Make a tuple out of a number and a string</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-main-function-to-insert-a-tuple-into-the-database">1.1.8. Modify main_function to insert a tuple into the database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/lua_tutorials.html#modify-main-function-to-insert-a-million-tuples-into-the-database">1.1.9. Modify main_function to insert a million tuples into the database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#sum-a-json-field-for-all-tuples">1.2. Подсчет суммы по JSON-полям во всех кортежах</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/lua_tutorials.html#indexed-pattern-search">1.3. Индексированный поиск по шаблонам</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/c_tutorial.html">2. Практическое задание на C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/c_tutorial.html#c-stored-procedures">2.1. Хранимые процедуры на языке C</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Contributor&#8217;s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/reference_capi/index.html">1. Справочник по C API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/box.html">1.1. Модуль <cite>box</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/clock.html">1.2. Модуль <cite>clock</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/coio.html">1.3. Модуль <cite>coio</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/error.html">1.4. Модуль <cite>error</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/fiber.html">1.5. Модуль <cite>fiber</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/box_index.html">1.6. Модуль <cite>index</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/latch.html">1.7. Модуль <cite>latch</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/utils.html">1.8. Модуль <cite>lua/utils</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/say.html">1.9. Модуль <cite>say</cite> (логирование)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/schema.html">1.10. Модуль <cite>schema</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/trivia.html">1.11. Модуль <cite>trivia/config</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/tuple.html">1.12. Модуль <cite>tuple</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/reference_capi/txn.html">1.13. Модуль <cite>txn</cite></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/internals_index.html">2. Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#tarantool-s-binary-protocol">2.1. Tarantool&#8217;s binary protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#notation-in-diagrams">2.1.1. Notation in diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#greeting-packet">2.1.2. Greeting packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#unified-packet-structure">2.1.3. Unified packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#authentication">2.1.4. Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#requests">2.1.5. Запросы</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#response-packet-structure">2.1.6. Response packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#replication-packet-structure">2.1.7. Replication packet structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/internals_index.html#xlog-snap">2.1.8. XLOG / SNAP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#data-persistence-and-the-wal-file-format">2.2. Data persistence and the WAL file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#the-snapshot-file-format">2.3. The snapshot file format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#the-recovery-process">2.4. The recovery process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/internals_index.html#server-startup-with-replication">2.5. Server startup with replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/build_contribute_index.html">3. Build and contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/building_from_source.html">3.1. Building from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/building_documentation.html">3.2. Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/release_management.html">3.3. Release management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/release_management.html#how-to-make-a-minor-release">3.3.1. How to make a minor release</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_guide/guidelines_index.html">4. Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/developer_guidelines.html">4.1. Developer guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/developer_guidelines.html#how-to-work-on-a-bug">4.1.1. How to work on a bug</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html">4.2. Documentation guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#markup-issues">4.2.1. Markup issues</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#wrapping-text">4.2.1.1. Wrapping text</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#formatting-code-snippets">4.2.1.2. Formatting code snippets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#using-separated-links">4.2.1.3. Using separated links</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#creating-labels-for-local-links">4.2.1.4. Creating labels for local links</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#making-comments">4.2.1.5. Making comments</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#language-and-style-issues">4.2.2. Language and style issues</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#us-vs-british-spelling">4.2.2.1. US vs British spelling</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#examples-and-templates">4.2.3. Examples and templates</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#module-and-function">4.2.3.1. Module and function</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/documentation_guidelines.html#module-class-and-method">4.2.3.2. Module, class and method</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/c_style_guide.html">4.3. C Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/c_style_guide.html#general-guidelines">4.3.1. General guidelines</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#commenting-style">4.3.1.1. Commenting style</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#header-files">4.3.1.2. Header files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#allocating-memory">4.3.1.3. Allocating memory</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#other">4.3.1.4. Other</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/c_style_guide.html#linux-kernel-coding-style">4.3.2. Linux kernel coding style</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-1-indentation">4.3.2.1. Chapter 1: Indentation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-2-breaking-long-lines-and-strings">4.3.2.2. Chapter 2: Breaking long lines and strings</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-3-placing-braces-and-spaces">4.3.2.3. Chapter 3: Placing Braces and Spaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-3-1-spaces">4.3.2.4. Chapter 3.1:  Spaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-4-naming">4.3.2.5. Chapter 4: Naming</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-5-typedefs">4.3.2.6. Chapter 5: Typedefs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-6-functions">4.3.2.7. Chapter 6: Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-7-centralized-exiting-of-functions">4.3.2.8. Chapter 7: Centralized exiting of functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-8-commenting">4.3.2.9. Chapter 8: Commenting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-9-you-ve-made-a-mess-of-it">4.3.2.10. Chapter 9: You&#8217;ve made a mess of it</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-10-kconfig-configuration-files">4.3.2.11. Chapter 10: Kconfig configuration files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-11-data-structures">4.3.2.12. Chapter 11: Data structures</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-12-macros-enums-and-rtl">4.3.2.13. Chapter 12: Macros, Enums and RTL</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-13-printing-kernel-messages">4.3.2.14. Chapter 13: Printing kernel messages</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-14-allocating-memory">4.3.2.15. Chapter 14: Allocating memory</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-15-the-inline-disease">4.3.2.16. Chapter 15: The inline disease</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-16-function-return-values-and-names">4.3.2.17. Chapter 16: Function return values and names</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-17-don-t-re-invent-the-kernel-macros">4.3.2.18. Chapter 17:  Don&#8217;t re-invent the kernel macros</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#chapter-18-editor-modelines-and-other-cruft">4.3.2.19. Chapter 18:  Editor modelines and other cruft</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/c_style_guide.html#appendix-i-references">4.3.2.20. Appendix I: References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dev_guide/python_style_guide.html">4.4. Python Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#introduction">4.4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#a-foolish-consistency-is-the-hobgoblin-of-little-minds">4.4.2. A Foolish Consistency is the Hobgoblin of Little Minds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#code-lay-out">4.4.3. Code lay-out</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#indentation">4.4.3.1. Indentation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#tabs-or-spaces">4.4.3.2. Tabs or Spaces?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#maximum-line-length">4.4.3.3. Maximum Line Length</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#blank-lines">4.4.3.4. Blank Lines</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#encodings-pep-263">4.4.3.5. Encodings (PEP 263)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#imports">4.4.3.6. Imports</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#whitespace-in-expressions-and-statements">4.4.4. Whitespace in Expressions and Statements</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#pet-peeves">4.4.4.1. Pet Peeves</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#other-recommendations">4.4.4.2. Other Recommendations</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#comments">4.4.5. Comments</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#block-comments">4.4.5.1. Block Comments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#inline-comments">4.4.5.2. Inline Comments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#documentation-strings">4.4.5.3. Documentation Strings</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#version-bookkeeping">4.4.6. Version Bookkeeping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#naming-conventions">4.4.7. Naming Conventions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#descriptive-naming-styles">4.4.7.1. Descriptive: Naming Styles</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dev_guide/python_style_guide.html#prescriptive-naming-conventions">4.4.7.2. Prescriptive: Naming Conventions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#names-to-avoid">4.4.7.2.1. Names to Avoid</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#package-and-module-names">4.4.7.2.2. Package and Module Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#class-names">4.4.7.2.3. Class Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#exception-names">4.4.7.2.4. Exception Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#global-variable-names">4.4.7.2.5. Global Variable Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#function-names">4.4.7.2.6. Function Names</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#function-and-method-arguments">4.4.7.2.7. Function and method arguments</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#method-names-and-instance-variables">4.4.7.2.8. Method Names and Instance Variables</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#constants">4.4.7.2.9. Constants</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dev_guide/python_style_guide.html#designing-for-inheritance">4.4.7.2.10. Designing for inheritance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#references">4.4.8. References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dev_guide/python_style_guide.html#copyright">4.4.9. Copyright</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
        <div class="b-cols_content_right">
          <div class="b-cols_content_right-slot">
  <div class="b-page_header">
    <ul class="b-path-list">
      <li class="b-path-list-item">
        <a href="../../index.html"
           class="b-path-list-item-url">
          Documentation
        </a>
      </li>
      
        <li class="b-path-list-item">
          <a href="../index.html"
             class="b-path-list-item-url b-ellipsis">
            Справочники
          </a>
        </li>
      
        <li class="b-path-list-item">
          <a href="index.html"
             class="b-path-list-item-url b-ellipsis">
            1. Справочник по встроенной библиотеке
          </a>
        </li>
      
      
      <li class="b-path-list-item">
        <div title="1.18. Модуль <cite>socket</cite>" class="b-path_current b-ellipsis">
          1.18. Модуль <cite>socket</cite>
        </div>
      </li>
      
    </ul>
  </div>

  <article class="b-article">
    
    
      <div class="admonition note">
        <p class="first admonition-title">Замечание</p>
        <p class="last">
          Документация находится в процессе перевода и может
          отставать от Английской версии
        </p>
      </div>
    
    <div class="section" id="module-socket">
<span id="socket-module"></span><h1>1.18. Модуль <cite>socket</cite><a class="headerlink" href="#module-socket" title="Ссылка на этот заголовок">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">socket</span></code> module allows exchanging data via BSD sockets with a local or
remote host in connection-oriented (TCP) or datagram-oriented (UDP) mode.
Semantics of the calls in the <code class="docutils literal"><span class="pre">socket</span></code> API closely follow semantics of the
corresponding POSIX calls. Function names and signatures are mostly compatible
with <a class="reference external" href="https://github.com/diegonehab/luasocket">luasocket</a>.</p>
<p>The functions for setting up and connecting are <code class="docutils literal"><span class="pre">socket</span></code>, <code class="docutils literal"><span class="pre">sysconnect</span></code>,
<code class="docutils literal"><span class="pre">tcp_connect</span></code>. The functions for sending data are <code class="docutils literal"><span class="pre">send</span></code>, <code class="docutils literal"><span class="pre">sendto</span></code>,
<code class="docutils literal"><span class="pre">write</span></code>, <code class="docutils literal"><span class="pre">syswrite</span></code>. The functions for receiving data are <code class="docutils literal"><span class="pre">recv</span></code>,
<code class="docutils literal"><span class="pre">recvfrom</span></code>, <code class="docutils literal"><span class="pre">read</span></code>. The functions for waiting before sending/receiving
data are <code class="docutils literal"><span class="pre">wait</span></code>, <code class="docutils literal"><span class="pre">readable</span></code>, <code class="docutils literal"><span class="pre">writable</span></code>. The functions for setting
flags are <code class="docutils literal"><span class="pre">nonblock</span></code>, <code class="docutils literal"><span class="pre">setsockopt</span></code>. The functions for stopping and
disconnecting are <code class="docutils literal"><span class="pre">shutdown</span></code>, <code class="docutils literal"><span class="pre">close</span></code>. The functions for error checking
are <code class="docutils literal"><span class="pre">errno</span></code>, <code class="docutils literal"><span class="pre">error</span></code>.</p>
<div class="table container">
<p><strong>Socket functions</strong></p>
<table border="1" class="left-align-column-2 docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Purposes</th>
<th class="head">Names</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>setup</td>
<td><a class="reference internal" href="#socket-socket"><span class="std std-ref">socket()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-tcp-connect"><span class="std std-ref">socket.tcp_connect()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-tcp-server"><span class="std std-ref">socket.tcp_server()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-sysconnect"><span class="std std-ref">socket_object:sysconnect()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-send"><span class="std std-ref">socket_object:send()</span></a></td>
</tr>
<tr class="row-odd"><td>sending</td>
<td><a class="reference internal" href="#socket-sendto"><span class="std std-ref">socket_object:sendto()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-send"><span class="std std-ref">socket_object:write()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-syswrite"><span class="std std-ref">socket_object:syswrite()</span></a></td>
</tr>
<tr class="row-even"><td>receiving</td>
<td><a class="reference internal" href="#socket-recv"><span class="std std-ref">socket_object:recv()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-recvfrom"><span class="std std-ref">socket_object:recvfrom()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-read"><span class="std std-ref">socket_object:read()</span></a></td>
</tr>
<tr class="row-odd"><td>flag setting</td>
<td><a class="reference internal" href="#socket-nonblock"><span class="std std-ref">socket_object:nonblock()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-setsockopt"><span class="std std-ref">socket_object:setsockopt()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-linger"><span class="std std-ref">socket_object:linger()</span></a></td>
</tr>
<tr class="row-even"><td>client/server</td>
<td><a class="reference internal" href="#socket-listen"><span class="std std-ref">socket_object:listen()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-accept"><span class="std std-ref">socket_object:accept()</span></a></td>
</tr>
<tr class="row-even"><td>teardown</td>
<td><a class="reference internal" href="#socket-shutdown"><span class="std std-ref">socket_object:shutdown()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-close"><span class="std std-ref">socket_object:close()</span></a></td>
</tr>
<tr class="row-even"><td>error checking</td>
<td><a class="reference internal" href="#socket-error"><span class="std std-ref">socket_object:error()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-error"><span class="std std-ref">socket_object:errno()</span></a></td>
</tr>
<tr class="row-even"><td>information</td>
<td><a class="reference internal" href="#socket-getaddrinfo"><span class="std std-ref">socket.getaddrinfo()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-getsockopt"><span class="std std-ref">socket_object:getsockopt()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-peer"><span class="std std-ref">socket_object:peer()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-name"><span class="std std-ref">socket_object:name()</span></a></td>
</tr>
<tr class="row-even"><td>state checking</td>
<td><a class="reference internal" href="#socket-readable"><span class="std std-ref">socket_object:readable()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-writable"><span class="std std-ref">socket_object:writable()</span></a></td>
</tr>
<tr class="row-even"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-wait"><span class="std std-ref">socket_object:wait()</span></a></td>
</tr>
<tr class="row-odd"><td>&#8220;&#8221;</td>
<td><a class="reference internal" href="#socket-iowait"><span class="std std-ref">socket.iowait()</span></a></td>
</tr>
</tbody>
</table>
</div>
<p>Typically a socket session will begin with the setup functions, will set one
or more flags, will have a loop with sending and receiving functions, will
end with the teardown functions &#8211; as an example at the end of this section
will show. Throughout, there may be error-checking and waiting functions for
synchronization. To prevent a fiber containing socket functions from &#8220;blocking&#8221;
other fibers, the <a class="reference internal" href="../../book/box/atomic.html#atomic-implicit-yields"><span class="std std-ref">implicit yield rules</span></a>
will cause a yield so that other processes
may take over, as is the norm for cooperative multitasking.</p>
<p>For all examples in this section the socket name will be sock and
the function invocations will look like <code class="docutils literal"><span class="pre">sock:function_name(...)</span></code>.</p>
<span class="target" id="lua-module.socket"></span><span class="target" id="socket-socket"></span><dl class="function">
<dt id="lua-функция.socket.__call">
<em class="property"> </em><code class="descclassname">socket.</code><code class="descname">__call</code><big>(</big><em>domain</em>, <em>type</em>, <em>protocol</em><big>)</big><a class="headerlink" href="#lua-функция.socket.__call" title="Ссылка на это определение">¶</a></dt>
<dd><p>Create a new TCP or UDP socket. The argument values
are the same as in the <a class="reference external" href="http://man7.org/linux/man-pages/man2/socket.2.html">Linux socket(2) man page</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">an unconnected socket, or nil.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">userdata</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">(</span><span class="s1">&#39;AF_INET&#39;</span><span class="p">,</span> <span class="s1">&#39;SOCK_STREAM&#39;</span><span class="p">,</span> <span class="s1">&#39;tcp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="socket-tcp-connect"></span><dl class="function">
<dt id="lua-функция.socket.tcp_connect">
<em class="property"> </em><code class="descclassname">socket.</code><code class="descname">tcp_connect</code><big>(</big><em>host</em><span class="optional">[</span>, <em>port</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket.tcp_connect" title="Ссылка на это определение">¶</a></dt>
<dd><p>Connect a socket to a remote host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> (<em>string</em>) &#8211; URL or IP address</li>
<li><strong>port</strong> (<em>number</em>) &#8211; port number</li>
<li><strong>timeout</strong> (<em>number</em>) &#8211; timeout</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">a connected socket, if no error.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">userdata</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>socket.tcp_connect(&#39;127.0.0.1&#39;, 3301)
</pre></div>
</div>
</dd></dl>

<span class="target" id="socket-getaddrinfo"></span><dl class="function">
<dt id="lua-функция.socket.getaddrinfo">
<em class="property"> </em><code class="descclassname">socket.</code><code class="descname">getaddrinfo</code><big>(</big><em>host</em>, <em>type</em><span class="optional">[</span>, <em>{option-list}</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket.getaddrinfo" title="Ссылка на это определение">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">socket.getaddrinfo()</span></code> function is useful for finding information
about a remote site so that the correct arguments for
<code class="docutils literal"><span class="pre">sock:sysconnect()</span></code> can be passed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">A table containing these fields: &#8220;host&#8221;, &#8220;family&#8221;, &#8220;type&#8221;, &#8220;protocol&#8221;, &#8220;port&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">table</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<p><code class="docutils literal"><span class="pre">socket.getaddrinfo('tarantool.org',</span> <span class="pre">'http')</span></code> will return variable
information such as</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">188.93.56.70</span>
    <span class="l l-Scalar l-Scalar-Plain">family</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">AF_INET</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SOCK_STREAM</span>
    <span class="l l-Scalar l-Scalar-Plain">protocol</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">188.93.56.70</span>
    <span class="l l-Scalar l-Scalar-Plain">family</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">AF_INET</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SOCK_DGRAM</span>
    <span class="l l-Scalar l-Scalar-Plain">protocol</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">udp</span>
    <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="nn">...</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="socket-tcp-server"></span><dl class="function">
<dt id="lua-функция.socket.tcp_server">
<em class="property"> </em><code class="descclassname">socket.</code><code class="descname">tcp_server</code><big>(</big><em>host</em>, <em>port</em>, <em>handler-function</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket.tcp_server" title="Ссылка на это определение">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">socket.tcp_server()</span></code> function makes Tarantool act as a server that
can accept connections. Usually the same objective
is accomplished with <a class="reference internal" href="../configuration/index.html#cfg-basic-listen"><span class="std std-ref">box.cfg{listen=...}</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string</em>) &#8211; host name or IP</li>
<li><strong>port</strong> (<em>number</em>) &#8211; host port, may be 0</li>
<li><strong>handler</strong> (<em>function/table</em>) &#8211; what to execute when a connection
occurs</li>
<li><strong>timeout</strong> (<em>number</em>) &#8211; number of seconds to wait before
timing out</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The handler-function parameter may be a function name (for example
<code class="docutils literal"><span class="pre">function_55</span></code>), a function declaration (for example
<code class="docutils literal"><span class="pre">function</span> <span class="pre">()</span> <span class="pre">print('!')</span> <span class="pre">end</span></code>), or a table including handler = function
(for example <code class="docutils literal"><span class="pre">{handler=function_55,</span> <span class="pre">name='A'}</span></code>).</p>
<p>Example:</p>
<p><code class="docutils literal"><span class="pre">socket.tcp_server('localhost',</span> <span class="pre">3302,</span> <span class="pre">function</span> <span class="pre">()</span> <span class="pre">end)</span></code></p>
</dd></dl>

<dl class="class">
<dt id="lua-объект.socket.socket_object">
<em class="property">объект </em><code class="descclassname">socket.</code><code class="descname">socket_object</code><a class="headerlink" href="#lua-объект.socket.socket_object" title="Ссылка на это определение">¶</a></dt>
<dd><span class="target" id="socket-sysconnect"></span><dl class="method">
<dt id="lua-функция.socket_object.sysconnect">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">sysconnect</code><big>(</big><em>host</em>, <em>port</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.sysconnect" title="Ссылка на это определение">¶</a></dt>
<dd><p>Connect an existing socket to a remote host. The argument values are the same as
in tcp_connect().
The host must be an IP address.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Either:</dt>
<dd><ul class="first last simple">
<li>host - a string representation of an IPv4 address
or an IPv6 address;</li>
<li>port - a number.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Or:</dt>
<dd><ul class="first last simple">
<li>host - a string containing &#8220;unix/&#8221;;</li>
<li>port - a string containing a path to a unix socket.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Or:</dt>
<dd><ul class="first last simple">
<li>host - a number, 0 (zero), meaning &#8220;all local
interfaces&#8221;;</li>
<li>port - a number. If a port number is 0 (zero),
the socket will be bound to a random local port.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">the socket object value may change if sysconnect() succeeds.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">socket</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;socket&#39;</span><span class="p">)</span>
<span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="s1">&#39;AF_INET&#39;</span><span class="p">,</span> <span class="s1">&#39;SOCK_STREAM&#39;</span><span class="p">,</span> <span class="s1">&#39;tcp&#39;</span><span class="p">)</span>
<span class="n">sock</span><span class="p">:</span><span class="n">sysconnect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3301</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="socket-send"></span><dl class="method">
<dt id="lua-функция.socket_object.send">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">send</code><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.send" title="Ссылка на это определение">¶</a></dt>
<dt id="lua-функция.socket_object.write">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">write</code><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.write" title="Ссылка на это определение">¶</a></dt>
<dd><p>Send data over a connected socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>string</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">the number of bytes sent.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: nil on error.</p>
</dd></dl>

<span class="target" id="socket-syswrite"></span><dl class="method">
<dt id="lua-функция.socket_object.syswrite">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">syswrite</code><big>(</big><em>size</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.syswrite" title="Ссылка на это определение">¶</a></dt>
<dd><p>Write as much as possible data to the socket buffer if non-blocking.
Rarely used. For details see <a class="reference external" href="https://github.com/tarantool/tarantool/wiki/sockets%201.6">this description</a>.</p>
</dd></dl>

<span class="target" id="socket-recv"></span><dl class="method">
<dt id="lua-функция.socket_object.recv">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">recv</code><big>(</big><em>size</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.recv" title="Ссылка на это определение">¶</a></dt>
<dd><p>Read <code class="docutils literal"><span class="pre">size</span></code> bytes from a connected socket. An internal read-ahead
buffer is used to reduce the cost of this call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>size</strong> (<em>integer</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">a string of the requested length on success.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: On error, returns an empty string, followed by status,
errno, errstr. In case the writing side has closed its
end, returns the remainder read from the socket (possibly
an empty string), followed by &#8220;eof&#8221; status.</p>
</dd></dl>

<span class="target" id="socket-read"></span><dl class="method">
<dt id="lua-функция.socket_object.read">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">read</code><big>(</big><em>limit</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.read" title="Ссылка на это определение">¶</a></dt>
<dt>
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">read</code><big>(</big><em>delimiter</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big></dt>
<dt>
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">read</code><big>(</big><em>{limit=limit}</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big></dt>
<dt>
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">read</code><big>(</big><em>{delimiter=delimiter}</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big></dt>
<dt>
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">read</code><big>(</big><em>{limit=limit</em>, <em>delimiter=delimiter}</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big></dt>
<dd><p>Read from a connected socket until some condition is true, and return
the bytes that were read.
Reading goes on until <code class="docutils literal"><span class="pre">limit</span></code> bytes have been read, or a delimiter
has been read, or a timeout has expired.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>limit</strong> (<em>integer</em>) &#8211; maximum number of bytes to read, for
example 50 means &#8220;stop after 50 bytes&#8221;</li>
<li><strong>delimiter</strong> (<em>string</em>) &#8211; separator for example
&#8216;?&#8217; means &#8220;stop after a question mark&#8221;</li>
<li><strong>timeout</strong> (<em>number</em>) &#8211; maximum number of seconds to wait for
example 50 means &#8220;stop after 50 seconds&#8221;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">an empty string if there is nothing more to read, or a nil
value if error, or a string up to <code class="docutils literal"><span class="pre">limit</span></code> bytes long,
which may include the bytes that matched the <code class="docutils literal"><span class="pre">delimiter</span></code>
expression.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-sysread"></span><dl class="method">
<dt id="lua-функция.socket_object.sysread">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">sysread</code><big>(</big><em>size</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.sysread" title="Ссылка на это определение">¶</a></dt>
<dd><p>Return data from the socket buffer if non-blocking.
In case the socket is blocking, <code class="docutils literal"><span class="pre">sysread()</span></code> can block the calling process.
Rarely used. For details, see also
<a class="reference external" href="https://github.com/tarantool/tarantool/wiki/sockets%201.6">this description</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>size</strong> (<em>integer</em>) &#8211; maximum number of bytes to read, for
example 50 means &#8220;stop after 50 bytes&#8221;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">an empty string if there is nothing more to read, or a nil
value if error, or a string up to <code class="docutils literal"><span class="pre">size</span></code> bytes long.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-bind"></span><dl class="method">
<dt id="lua-функция.socket_object.bind">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">bind</code><big>(</big><em>host</em><span class="optional">[</span>, <em>port</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.bind" title="Ссылка на это определение">¶</a></dt>
<dd><p>Bind a socket to the given host/port. A UDP socket after binding
can be used to receive data (see <a class="reference internal" href="#socket-recvfrom"><span class="std std-ref">socket_object.recvfrom</span></a>).
A TCP socket can be used to accept new connections, after it has
been put in listen mode.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> &#8211; </li>
<li><strong>port</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">a socket object on success</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">userdata</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: Returns nil, status, errno, errstr on error.</p>
</dd></dl>

<span class="target" id="socket-listen"></span><dl class="method">
<dt id="lua-функция.socket_object.listen">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">listen</code><big>(</big><em>backlog</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.listen" title="Ссылка на это определение">¶</a></dt>
<dd><p>Start listening for incoming connections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>backlog</strong> &#8211; On Linux the listen <code class="docutils literal"><span class="pre">backlog</span></code> backlog may be from
/proc/sys/net/core/somaxconn, on BSD the backlog
may be <code class="docutils literal"><span class="pre">SOMAXCONN</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">true for success, false for error.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">boolean.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-accept"></span><dl class="method">
<dt id="lua-функция.socket_object.accept">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">accept</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.accept" title="Ссылка на это определение">¶</a></dt>
<dd><p>Accept a new client connection and create a new connected socket.
It is good practice to set the socket&#8217;s blocking mode explicitly
after accepting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">new socket if success.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">userdata</td>
</tr>
</tbody>
</table>
<p>Possible errors: nil.</p>
</dd></dl>

<span class="target" id="socket-sendto"></span><dl class="method">
<dt id="lua-функция.socket_object.sendto">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">sendto</code><big>(</big><em>host</em>, <em>port</em>, <em>data</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.sendto" title="Ссылка на это определение">¶</a></dt>
<dd><p>Send a message on a UDP socket to a specified host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> (<em>string</em>) &#8211; </li>
<li><strong>port</strong> (<em>number</em>) &#8211; </li>
<li><strong>data</strong> (<em>string</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">the number of bytes sent.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: on error, returns status, errno, errstr.</p>
</dd></dl>

<span class="target" id="socket-recvfrom"></span><dl class="method">
<dt id="lua-функция.socket_object.recvfrom">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">recvfrom</code><big>(</big><em>limit</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.recvfrom" title="Ссылка на это определение">¶</a></dt>
<dd><p>Receive a message on a UDP socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>limit</strong> (<em>integer</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">message, a table containing &#8220;host&#8221;, &#8220;family&#8221; and &#8220;port&#8221; fields.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">string, table</p>
</td>
</tr>
</tbody>
</table>
<p>Possible errors: on error, returns status, errno, errstr.</p>
<p><strong>Example:</strong></p>
<p>After <code class="docutils literal"><span class="pre">message_content,</span> <span class="pre">message_sender</span> <span class="pre">=</span> <span class="pre">recvfrom(1)</span></code>
the value of <code class="docutils literal"><span class="pre">message_content</span></code> might be a string containing &#8216;X&#8217; and
the value of <code class="docutils literal"><span class="pre">message_sender</span></code> might be a table containing</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">message_sender</span><span class="p">.</span><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;18.44.0.1&#39;</span>
<span class="n">message_sender</span><span class="p">.</span><span class="n">family</span> <span class="o">=</span> <span class="s1">&#39;AF_INET&#39;</span>
<span class="n">message_sender</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">43065</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="socket-shutdown"></span><dl class="method">
<dt id="lua-функция.socket_object.shutdown">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">shutdown</code><big>(</big><em>how</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.shutdown" title="Ссылка на это определение">¶</a></dt>
<dd><p>Shutdown a reading end, a writing end, or both ends of a socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>how</strong> &#8211; socket.SHUT_RD, socket.SHUT_WR, or socket.SHUT_RDWR.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first">true or false.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Rtype:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-close"></span><dl class="method">
<dt id="lua-функция.socket_object.close">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">close</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.close" title="Ссылка на это определение">¶</a></dt>
<dd><p>Close (destroy) a socket. A closed socket should not be used any more.
A socket is closed automatically when its userdata is garbage collected by Lua.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">true on success, false on error. For example, if
sock is already closed, sock:close() returns false.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-error"></span><dl class="method">
<dt id="lua-функция.socket_object.error">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">error</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.error" title="Ссылка на это определение">¶</a></dt>
<dt id="lua-функция.socket_object.errno">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">errno</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.errno" title="Ссылка на это определение">¶</a></dt>
<dd><p>Retrieve information about the last error that occurred on a socket, if any.
Errors do not cause throwing of exceptions so these functions are usually necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">result for <code class="docutils literal"><span class="pre">sock:errno()</span></code>, result for <code class="docutils literal"><span class="pre">sock:error()</span></code>.
If there is no error, then <code class="docutils literal"><span class="pre">sock:errno()</span></code> will return 0 and <code class="docutils literal"><span class="pre">sock:error()</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">number, string</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-setsockopt"></span><dl class="method">
<dt id="lua-функция.socket_object.setsockopt">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">setsockopt</code><big>(</big><em>level</em>, <em>name</em>, <em>value</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.setsockopt" title="Ссылка на это определение">¶</a></dt>
<dd><p>Set socket flags. The argument values are the same as in the
<a class="reference external" href="http://man7.org/linux/man-pages/man2/setsockopt.2.html">Linux getsockopt(2) man page</a>.
The ones that Tarantool accepts are:</p>
<blockquote>
<div><ul class="simple">
<li>SO_ACCEPTCONN</li>
<li>SO_BINDTODEVICE</li>
<li>SO_BROADCAST</li>
<li>SO_DEBUG</li>
<li>SO_DOMAIN</li>
<li>SO_ERROR</li>
<li>SO_DONTROUTE</li>
<li>SO_KEEPALIVE</li>
<li>SO_MARK</li>
<li>SO_OOBINLINE</li>
<li>SO_PASSCRED</li>
<li>SO_PEERCRED</li>
<li>SO_PRIORITY</li>
<li>SO_PROTOCOL</li>
<li>SO_RCVBUF</li>
<li>SO_RCVBUFFORCE</li>
<li>SO_RCVLOWAT</li>
<li>SO_SNDLOWAT</li>
<li>SO_RCVTIMEO</li>
<li>SO_SNDTIMEO</li>
<li>SO_REUSEADDR</li>
<li>SO_SNDBUF</li>
<li>SO_SNDBUFFORCE</li>
<li>SO_TIMESTAMP</li>
<li>SO_TYPE</li>
</ul>
</div></blockquote>
<p>Setting SO_LINGER is done with <code class="docutils literal"><span class="pre">sock:linger(active)</span></code>.</p>
</dd></dl>

<span class="target" id="socket-getsockopt"></span><dl class="method">
<dt id="lua-функция.socket_object.getsockopt">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">getsockopt</code><big>(</big><em>level</em>, <em>name</em><big>)</big><a class="headerlink" href="#lua-функция.socket_object.getsockopt" title="Ссылка на это определение">¶</a></dt>
<dd><p>Get socket flags. For a list of possible flags see <code class="docutils literal"><span class="pre">sock:setsockopt()</span></code>.</p>
</dd></dl>

<span class="target" id="socket-linger"></span><dl class="method">
<dt id="lua-функция.socket_object.linger">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">linger</code><big>(</big><span class="optional">[</span><em>active</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.linger" title="Ссылка на это определение">¶</a></dt>
<dd><p>Set or clear the SO_LINGER flag. For a description of the flag, see
the <a class="reference external" href="http://man7.org/linux/man-pages/man1/loginctl.1.html">Linux man page</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first simple">
<li><strong>active</strong> (<em>boolean</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return:</th><td class="field-body"><p class="first last">new active and timeout values.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-nonblock"></span><dl class="method">
<dt id="lua-функция.socket_object.nonblock">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">nonblock</code><big>(</big><span class="optional">[</span><em>flag</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.nonblock" title="Ссылка на это определение">¶</a></dt>
<dd><ul class="simple">
<li><code class="docutils literal"><span class="pre">sock:nonblock()</span></code> returns the current flag value.</li>
<li><code class="docutils literal"><span class="pre">sock:nonblock(false)</span></code> sets the flag to false and returns false.</li>
<li><code class="docutils literal"><span class="pre">sock:nonblock(true)</span></code> sets the flag to true and returns true.</li>
</ul>
<p>This function may be useful before invoking a function which might
otherwise block indefinitely.</p>
</dd></dl>

<span class="target" id="socket-readable"></span><dl class="method">
<dt id="lua-функция.socket_object.readable">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">readable</code><big>(</big><span class="optional">[</span><em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.readable" title="Ссылка на это определение">¶</a></dt>
<dd><p>Wait until something is readable, or until a timeout value expires.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">true if the socket is now readable, false if timeout expired;</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-writable"></span><dl class="method">
<dt id="lua-функция.socket_object.writable">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">writable</code><big>(</big><span class="optional">[</span><em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.writable" title="Ссылка на это определение">¶</a></dt>
<dd><p>Wait until something is writable, or until a timeout value expires.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">true if the socket is now writable, false if timeout expired;</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-wait"></span><dl class="method">
<dt id="lua-функция.socket_object.wait">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">wait</code><big>(</big><span class="optional">[</span><em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket_object.wait" title="Ссылка на это определение">¶</a></dt>
<dd><p>Wait until something is either readable or writable, or until a timeout value expires.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">&#8216;R&#8217; if the socket is now readable, &#8216;W&#8217; if the socket is now writable, &#8216;RW&#8217; if the socket is now both readable and writable, &#8216;&#8217; (empty string) if timeout expired;</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-name"></span><dl class="method">
<dt id="lua-функция.socket_object.name">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">name</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.name" title="Ссылка на это определение">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">sock:name()</span></code> function is used to get information about the
near side of the connection. If a socket was bound to <code class="docutils literal"><span class="pre">xyz.com:45</span></code>,
then <code class="docutils literal"><span class="pre">sock:name</span></code> will return information about <code class="docutils literal"><span class="pre">[host:xyz.com,</span> <span class="pre">port:45]</span></code>.
The equivalent POSIX function is <code class="docutils literal"><span class="pre">getsockname()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">A table containing these fields: &#8220;host&#8221;, &#8220;family&#8221;, &#8220;type&#8221;, &#8220;protocol&#8221;, &#8220;port&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">table</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="socket-peer"></span><dl class="method">
<dt id="lua-функция.socket_object.peer">
<em class="property"> </em><code class="descclassname">socket_object:</code><code class="descname">peer</code><big>(</big><big>)</big><a class="headerlink" href="#lua-функция.socket_object.peer" title="Ссылка на это определение">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">sock:peer()</span></code> function is used to get information about the far side of a connection.
If a TCP connection has been made to a distant host <code class="docutils literal"><span class="pre">tarantool.org:80</span></code>, <code class="docutils literal"><span class="pre">sock:peer()</span></code>
will return information about <code class="docutils literal"><span class="pre">[host:tarantool.org,</span> <span class="pre">port:80]</span></code>.
The equivalent POSIX function is <code class="docutils literal"><span class="pre">getpeername()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return:</th><td class="field-body">A table containing these fields: &#8220;host&#8221;, &#8220;family&#8221;, &#8220;type&#8221;, &#8220;protocol&#8221;, &#8220;port&#8221;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Rtype:</th><td class="field-body">table</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="socket-iowait"></span><dl class="function">
<dt id="lua-функция.socket.iowait">
<em class="property"> </em><code class="descclassname">socket.</code><code class="descname">iowait</code><big>(</big><em>fd</em>, <em>read-or-write-flags</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#lua-функция.socket.iowait" title="Ссылка на это определение">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">socket.iowait()</span></code> function is used to wait until read-or-write activity
occurs for a file descriptor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Параметры:</th><td class="field-body"><ul class="first last simple">
<li><strong>fd</strong> &#8211; file descriptor</li>
<li><strong>read-or-write-flags</strong> &#8211; &#8216;R&#8217; or 1 = read, &#8216;W&#8217; or 2 = write, &#8216;RW&#8217; or 3 = read|write.</li>
<li><strong>timeout</strong> &#8211; number of seconds to wait</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If the fd parameter is nil, then there will be a sleep until the timeout.
If the timeout parameter is nil or unspecified, then timeout is infinite.</p>
<p>Ordinarily the return value is the activity that occurred (&#8216;R&#8217; or &#8216;W&#8217; or &#8216;RW&#8217; or 1 or 2 or 3).
If the timeout period goes by without any reading or writing, the
return is an error = ETIMEDOUT.</p>
<p>Example: <code class="docutils literal"><span class="pre">socket.iowait(sock:fd(),</span> <span class="pre">'r',</span> <span class="pre">1.11)</span></code></p>
</dd></dl>

<div class="section" id="examples">
<h2>1.18.1. Примеры:<a class="headerlink" href="#examples" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="use-of-a-tcp-socket-over-the-internet">
<h3>1.18.1.1. Use of a TCP socket over the Internet<a class="headerlink" href="#use-of-a-tcp-socket-over-the-internet" title="Ссылка на этот заголовок">¶</a></h3>
<p>In this example a connection is made over the internet between the Tarantool
server and tarantool.org, then an HTTP &#8220;head&#8221; message is sent, and a response
is received: &#8220;<code class="docutils literal"><span class="pre">HTTP/1.1</span> <span class="pre">200</span> <span class="pre">OK</span></code>&#8221; or something else if the site has moved.
This is not a useful way to communicate
with this particular site, but shows that the system works.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">socket</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">socket&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">tcp_connect</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tarantool.org&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sock</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock</span><span class="p">:</span><span class="nb">error</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock</span><span class="p">:</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">HEAD / HTTP/1.0</span><span class="se">\r\n</span><span class="s">Host: tarantool.org</span><span class="se">\r\n\r\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock</span><span class="p">:</span><span class="n">read</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">HTTP/1.1 302 Move</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="use-of-a-udp-socket-on-localhost">
<h3>1.18.1.2. Use of a UDP socket on localhost<a class="headerlink" href="#use-of-a-udp-socket-on-localhost" title="Ссылка на этот заголовок">¶</a></h3>
<p>Here is an example with datagrams. Set up two connections on 127.0.0.1
(localhost): <code class="docutils literal"><span class="pre">sock_1</span></code> and <code class="docutils literal"><span class="pre">sock_2</span></code>. Using <code class="docutils literal"><span class="pre">sock_2</span></code>, send a message
to <code class="docutils literal"><span class="pre">sock_1</span></code>. Using <code class="docutils literal"><span class="pre">sock_1</span></code>, receive a message. Display the received
message. Close both connections. <br /> This is not a useful way for a
computer to communicate with itself, but shows that the system works.</p>
<div class="highlight-tarantoolsession"><div class="highlight"><pre><span></span><span class="gp">tarantool&gt; </span><span class="n">socket</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">socket&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_1</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">AF_INET&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">SOCK_DGRAM&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">udp&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_1</span><span class="p">:</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_2</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">AF_INET&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">SOCK_DGRAM&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">udp&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_2</span><span class="p">:</span><span class="n">sendto</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">127.0.0.1&#39;</span><span class="p">,</span> <span class="n">sock_1</span><span class="p">:</span><span class="n">name</span><span class="p">().</span><span class="n">port</span><span class="p">,</span><span class="s1">&#39;</span><span class="s">X&#39;</span><span class="p">)</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">message</span> <span class="o">=</span> <span class="n">sock_1</span><span class="p">:</span><span class="n">recvfrom</span><span class="p">()</span>
<span class="nn">---</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">message</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">X</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_1</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
<span class="gp">tarantool&gt; </span><span class="n">sock_2</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="section" id="use-tcp-server-to-accept-file-contents-sent-with-socat">
<h3>1.18.1.3. Use tcp_server to accept file contents sent with socat<a class="headerlink" href="#use-tcp-server-to-accept-file-contents-sent-with-socat" title="Ссылка на этот заголовок">¶</a></h3>
<p>Here is an example of the tcp_server function, reading
strings from the client and printing them. On the client
side, the Linux socat utility will be used to ship a
whole file for the tcp_server function to read.</p>
<p>Start two shells. The first shell will be the server.
The second shell will be the client.</p>
<p>On the first shell, start Tarantool and say:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{}</span>
<span class="n">socket</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;socket&#39;</span><span class="p">)</span>
<span class="n">socket</span><span class="p">.</span><span class="n">tcp_server</span><span class="p">(</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="mi">3302</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="kr">while</span> <span class="kc">true</span> <span class="kr">do</span>
      <span class="kd">local</span> <span class="n">request</span>
      <span class="n">request</span> <span class="o">=</span> <span class="n">s</span><span class="p">:</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
      <span class="kr">if</span> <span class="n">request</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">request</span> <span class="o">==</span> <span class="kc">nil</span> <span class="kr">then</span>
        <span class="kr">break</span>
      <span class="kr">end</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="kr">end</span>
  <span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code means: use <cite>tcp_server()</cite> to wait for a
connection from any host on port 3302. When it happens,
enter a loop that reads on the socket and prints what it
reads. The &#8220;delimiter&#8221; for the read function is &#8220;\n&#8221; so
each <cite>read()</cite> will read a string as far as the next line feed,
including the line feed.</p>
<p>On the second shell, create a file that contains a few
lines. The contents don&#8217;t matter. Suppose the first line
contains A, the second line contains B, the third line
contains C. Call this file &#8220;tmp.txt&#8221;.</p>
<p>On the second shell, use the socat utility to ship the
tmp.txt file to the server&#8217;s host and port:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> socat TCP:localhost:3302 ./tmp.txt
</pre></div>
</div>
<p>Now watch what happens on the first shell.
The strings &#8220;A&#8221;, &#8220;B&#8221;, &#8220;C&#8221; are printed.</p>
</div>
</div>
</div>

  </article>

            
            
  
    
      <div class="b-page_over-tail">
    
    
      <div class="b-page_over-prev">
        <a href="pickle.html"
           class="b-prev b-ellipsis"
           title="1.17. Модуль &lt;cite&gt;pickle&lt;/cite&gt;">1.17. Модуль <cite>pickle</cite></a>
      </div>
    
    <div class="b-page_over-lang">
      <ul class="b-page_over-lang-list">
        <li class="b-page_over-lang-item">
          <a href="../../../_sources/doc/reference/reference_lua/socket.txt"
             class="b-page_over-lang-url"> Source </a>
        </li>
      </ul>
    </div>
    
      <div class="b-page_over-next">
        <a href="strict.html"
           class="b-next b-ellipsis"
           title="1.19. Модуль &lt;cite&gt;strict&lt;/cite&gt;">1.19. Модуль <cite>strict</cite></a>
      </div>
    
    </div>
  
</div>
        </div>
      </div>
    
  

      </div>
    </div>
    <!-- FOOTER > -->
    
<footer class="b-footer">
  <div class="b-footer-wrapper">
    <nav class="b-footer_menu">
      
  <ul class="b-menu">
    
      
      <li class="b-menu-item">
      
        <a href="../../../index.html" class="b-menu-item-url">Overview</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../try.html" class="b-menu-item-url">Try</a>
      </li>
    
      
      <li class="b-menu-item p-active">
      
        <a href="../../../doc.html" class="b-menu-item-url">Documentation</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../download.html" class="b-menu-item-url">Download</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../careers.html" class="b-menu-item-url">Careers</a>
      </li>
    
      
      <li class="b-menu-item">
      
        <a href="../../../rocks.html" class="b-menu-item-url">Rocks</a>
      </li>
    
  </ul>

      <div class="b-footer-other">
        <a href="http://15.tarantool.org">1.5 web site and downloads</a>
      </div>
    </nav>
  </div>
</footer>

    <!-- < FOOTER -->
    <div id="mobile-checker"></div>
  </body>
</html>

